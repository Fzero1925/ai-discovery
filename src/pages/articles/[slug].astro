---
import ArticleLayout from '../../layouts/ArticleLayout.astro';
import { getArticleBySlug, getRelatedArticles, articles } from '../../data/articles';
import ArticleCard from '../../components/ArticleCard.astro';

export async function getStaticPaths() {
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: article,
  }));
}

const { slug } = Astro.params;
const article = getArticleBySlug(slug as string);

if (!article) {
  return Astro.redirect('/404');
}

const relatedArticles = getRelatedArticles(slug as string, 3);
---

<ArticleLayout {...article}>
  <!-- Article content will be defined in individual article files -->
  <div data-pagefind-body data-pagefind-meta={`title:${article.title}`} data-pagefind-meta={`category:${article.category}`} data-pagefind-meta="type:æ–‡ç« ">
    <div id="article-content">
      <!-- This will be replaced with actual article content -->
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8">
        <h2>ğŸš§ å†…å®¹å¼€å‘ä¸­</h2>
        <p class="text-gray-600 mt-2">
          è¿™ç¯‡æ–‡ç« æ­£åœ¨å¼€å‘ä¸­ï¼Œå®Œæ•´å†…å®¹å³å°†ä¸Šçº¿ã€‚è¯·å…³æ³¨æˆ‘ä»¬çš„æœ€æ–°åŠ¨æ€ã€‚
        </p>
      </div>
      
      <!-- Placeholder content based on article data -->
      <h2>æ–‡ç« æ¦‚è¿°</h2>
      <p>{article.description}</p>
      
      <h2>ä¸»è¦å†…å®¹</h2>
      <p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä»¥ä¸‹å†…å®¹ï¼š</p>
      <ul>
        {article.tags.map(tag => (
          <li>{tag}ç›¸å…³çš„è¯¦ç»†åˆ†æå’Œä½¿ç”¨æŒ‡å—</li>
        ))}
      </ul>
      
      <h2>æ€»ç»“</h2>
      <p>é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ å°†èƒ½å¤Ÿæ›´å¥½åœ°äº†è§£å’Œä½¿ç”¨ç›¸å…³çš„AIå·¥å…·ã€‚æˆ‘ä»¬å°†æŒç»­æ›´æ–°å†…å®¹ï¼Œä¸ºä½ æä¾›æœ€æ–°çš„ä¿¡æ¯å’Œå®ç”¨æŒ‡å—ã€‚</p>
    </div>
  </div>
  
  <!-- Related Articles -->
  {relatedArticles.length > 0 && (
    <section class="border-t border-gray-200 py-12">
      <div class="max-w-4xl mx-auto px-4 sm:px-6">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">ç›¸å…³æ–‡ç« </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {relatedArticles.map(relatedArticle => (
            <ArticleCard {...relatedArticle} />
          ))}
        </div>
      </div>
    </section>
  )}
</ArticleLayout>