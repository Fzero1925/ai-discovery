<!-- Affiliate call-to-action for AI tools -->

{{ $affiliateData := dict
  "jasper" (dict "url" "https://jasper.ai/?via=aidiscovery" "commission" "30%" "cookie" "45 days")
  "copy_ai" (dict "url" "https://copy.ai?via=aidiscovery" "commission" "25%" "cookie" "30 days")
  "notion" (dict "url" "https://notion.so?r=aidiscovery" "commission" "20%" "cookie" "180 days")
  "grammarly" (dict "url" "https://grammarly.com/a/aidiscovery" "commission" "20%" "cookie" "90 days")
  "canva" (dict "url" "https://canva.com/p/aidiscovery" "commission" "15%" "cookie" "30 days")
  "midjourney" (dict "url" "https://midjourney.com/?ref=aidiscovery" "commission" "N/A" "cookie" "N/A")
  "leonardo_ai" (dict "url" "https://leonardo.ai?via=aidiscovery" "commission" "25%" "cookie" "30 days")
  "cursor_ai" (dict "url" "https://cursor.so?ref=aidiscovery" "commission" "30%" "cookie" "60 days")
  "zapier" (dict "url" "https://zapier.com/l/aidiscovery" "commission" "25%" "cookie" "90 days")
}}

{{ if and (.Params.tool_name) (.IsPage) (not (in .Params.categories "news")) }}
  {{ $toolKey := lower (.Params.tool_name | replaceRE "[^a-zA-Z0-9]" "_") }}
  {{ $affiliateInfo := index $affiliateData $toolKey }}

  <section class="affiliate-cta">
    <h2>Ready to try {{ .Params.tool_name }}?</h2>
    <p>We may earn a commission if you purchase through the link below. Pricing stays the same for you.</p>

    {{ if $affiliateInfo }}
      <a href="{{ $affiliateInfo.url }}" class="btn-affiliate-primary" target="_blank" rel="nofollow sponsored">
        Try {{ .Params.tool_name }}
      </a>
      <p class="affiliate-meta">Cookie window: {{ $affiliateInfo.cookie }} | Commission: {{ $affiliateInfo.commission }}</p>
    {{ else }}
      {{ if .Params.tool_website }}
      <a href="{{ .Params.tool_website }}" class="btn-affiliate-primary" target="_blank" rel="nofollow">
        Visit the official site
      </a>
      {{ end }}
    {{ end }}
  </section>
{{ end }}
