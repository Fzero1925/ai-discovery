{{ define "main" }}
<div class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">AI news and tools in plain English.</h1>
    <p class="hero-description">Daily briefs and workflow notes so your team stays current on research, launches, policy, and robotics without sifting through noise.</p>
  </div>
  <style>
    .hero-section{padding:48px 0;background:linear-gradient(180deg,#f8fafc,transparent)}
    .hero-title{font-size:2.2rem;margin:0 0 12px}
    .hero-description{color:#475569;max-width:760px}
  </style>
</div>

<section class="featured-news">
  <div class="container">
    <div class="section-header">
      <h2>Latest Tech News</h2>
      <p class="section-subtitle">What's new, why it matters, and context from authoritative sources.</p>
    </div>
    <div class="guides-grid">
      {{ $news := where site.RegularPages "Params.categories" "intersect" (slice "news") }}
      {{ range first 8 (sort $news "Date" "desc") }}
      <article class="guide-card">
        <div class="guide-image">
          {{ $imgSrc := .Params.featured_image }}
          {{ partial "image-resource" (dict "Src" $imgSrc "Alt" .Title "Width" 800 "Height" 450 "Fallback" "images/news-default.png") }}
          <div class="image-overlay"><span class="new-badge">Latest</span></div>
        </div>
        <div class="guide-content">
          <div class="guide-category">{{ range .Params.categories }}<span class="category-tag">{{ . | title | replace "-" " " }}</span>{{ end }}</div>
          <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
          <p class="guide-excerpt">{{ .Description | default (.Summary | plainify) | truncate 100 }}</p>
          <div class="guide-meta">
            <div class="meta-left"><span class="guide-date">{{ .Date.Format "Jan 2, 2006" }}</span><span class="reading-time">{{ .ReadingTime }} min read</span></div>
            <div class="meta-right"><span class="analysis-type">News</span></div>
          </div>
        </div>
      </article>
      {{ end }}
    </div>
    <div class="view-all"><a href="/news/" class="btn-primary">View All News</a>
      <p class="discovery-count">{{ len $news }} news updates published</p>
    </div>
  </div>
  <style>
    .featured-news{padding:48px 0}
    .section-header{text-align:center;margin-bottom:32px}
    .section-subtitle{color:#6b7280;font-size:1.05rem;margin:.5rem auto 0;max-width:640px}
    .guides-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:24px;margin-bottom:24px;align-items:stretch}
    .guide-card{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 4px 6px rgba(0,0,0,.05);display:flex;flex-direction:column;height:100%}
    .guide-image{position:relative;overflow:hidden;aspect-ratio:16/9;background:#f8fafc}
    .guide-image img{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}
    .guide-card:hover .guide-image img{transform:scale(1.05)}
    .guide-content{padding:16px;flex:1;display:flex;flex-direction:column}
    .image-overlay{position:absolute;top:10px;right:10px;z-index:2}
    .new-badge{background:linear-gradient(45deg,#4f46e5,#7c3aed);color:#fff;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:600}
    .guide-meta{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .category-tag{background:#eef2ff;color:#3730a3;padding:2px 8px;border-radius:10px;margin-right:6px;font-size:.75rem}
    .analysis-type{background:#f3f4f6;color:#374151;padding:2px 6px;border-radius:6px;font-size:.75rem;font-weight:500}
    .discovery-count{text-align:center;color:#6b7280;font-size:.9rem;margin-top:8px;font-weight:500}
    .btn-primary{display:inline-block;background:#2563eb;color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none}
    .btn-primary:hover{background:#1d4ed8}
  </style>
</section>

<section class="tools-preview">
  <div class="container">
    <div class="section-header">
      <h2>Latest Tool Guides</h2>
      <p class="section-subtitle">Workflow-first rundowns to help you choose the right software.</p>
    </div>
    {{ $articles := where site.RegularPages "Section" "articles" }}
    {{ $news := where $articles "Params.categories" "intersect" (slice "news") }}
    {{ $robotics := where $articles "Params.categories" "intersect" (slice "robotics") }}
    {{ $tools := $articles | complement $news }}
    {{ $tools = $tools | complement $robotics }}
    <div class="tools-grid">
      {{ range first 4 (sort $tools "Date" "desc") }}
      <article class="tool-card">
        <div class="tool-image">
          {{ $imgSrc := .Params.featured_image }}
          {{ partial "image-resource" (dict "Src" $imgSrc "Alt" .Title "Width" 600 "Height" 360 "Fallback" "images/tools-default.png") }}
        </div>
        <div class="tool-info">
          <div class="tool-header">
            <h3 class="tool-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
            <div class="tool-categories">
              {{ range .Params.categories }}
              <span class="category-tag">{{ . | title }}</span>
              {{ end }}
            </div>
          </div>
          <p class="tool-description">{{ .Description | default (.Summary | plainify | truncate 120) }}</p>
          <div class="tool-meta">
            <div class="pricing-info">
              {{ if .Params.free_trial }}<span class="free-trial">Free trial</span>{{ end }}
              {{ if .Params.pricing }}<span class="pricing-tag">{{ .Params.pricing }}</span>{{ end }}
            </div>
            <a class="read-more" href="{{ .Permalink }}">Read overview</a>
          </div>
        </div>
      </article>
      {{ end }}
    </div>
    <div class="view-all"><a href="/tools/" class="link-inline">Browse all tool guides</a></div>
  </div>
  <style>
    .tools-preview{padding:48px 0;background:#f9fafb}
    .tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}
    .link-inline{color:#2563eb;text-decoration:none;font-weight:600}
    .link-inline:hover{text-decoration:underline}
  </style>
</section>

<section class="robotics-preview">
  <div class="container">
    <div class="section-header">
      <h2>Robotics Highlights</h2>
      <p class="section-subtitle">Industrial and service robotics stories with deployment context.</p>
    </div>
    {{ $robotics := where site.RegularPages "Params.categories" "intersect" (slice "robotics") }}
    <div class="robotics-grid">
      {{ range first 3 (sort $robotics "Date" "desc") }}
      <article class="robotics-card">
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <p>{{ .Description | default (.Summary | plainify | truncate 140) }}</p>
        <div class="robotics-meta">
          <span>{{ .Date.Format "Jan 2, 2006" }}</span>
          <span>{{ .ReadingTime }} min read</span>
        </div>
      </article>
      {{ end }}
    </div>
    <div class="view-all"><a href="/robot/" class="link-inline">View robotics coverage</a></div>
  </div>
  <style>
    .robotics-preview{padding:48px 0}
    .robotics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}
    .robotics-card{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:18px;display:flex;flex-direction:column;gap:12px}
    .robotics-card h3{margin:0;font-size:1.1rem}
    .robotics-card p{margin:0;color:#475569}
    .robotics-meta{display:flex;gap:16px;color:#6b7280;font-size:.85rem}
  </style>
</section>
{{ end }}
