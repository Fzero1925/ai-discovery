{{ define "main" }}
<section class="news-list-page">
  <header class="list-header">
    <div class="container">
      <h1 class="list-title">Latest Tech News</h1>
      <p class="list-description">What's new, why it matters, and context curated from authoritative sources.</p>
    </div>
  </header>

  {{ $news := where site.RegularPages "Params.categories" "intersect" (slice "news") }}
  {{ $paginator := .Paginate (sort $news "Date" "desc") 12 }}

  <section class="news-grid-section">
    <div class="container">
      <div class="guides-grid">
        {{ range $paginator.Pages }}
        <article class="guide-card">
          <div class="guide-image">
            {{ $imgSrc := .Params.featured_image }}
            {{ partial "image-resource" (dict "Src" $imgSrc "Alt" (.Params.image_alt | default .Title) "Width" 800 "Height" 450 "Fallback" "images/news-default.png") }}
            <div class="image-overlay"><span class="new-badge">News</span></div>
          </div>
          <div class="guide-content">
            <div class="guide-category">
              {{ range .Params.categories }}<span class="category-tag">{{ . | title | replace "-" " " }}</span>{{ end }}
            </div>
            <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
            <p class="guide-excerpt">{{ .Description | default (.Summary | plainify) | truncate 120 }}</p>
            <div class="guide-meta">
              <div class="meta-left">
                <span class="guide-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                <span class="reading-time">{{ .ReadingTime }} min read</span>
              </div>
              <div class="meta-right"><span class="analysis-type">News</span></div>
            </div>
          </div>
        </article>
        {{ end }}
      </div>

      {{ if gt $paginator.TotalPages 1 }}
      <nav class="pagination">
        {{ if $paginator.HasPrev }}<a class="page-link" href="{{ $paginator.Prev.URL }}">< Newer</a>{{ end }}
        <span class="page-info">Page {{ $paginator.PageNumber }} of {{ $paginator.TotalPages }}</span>
        {{ if $paginator.HasNext }}<a class="page-link" href="{{ $paginator.Next.URL }}">Older ></a>{{ end }}
      </nav>
      {{ end }}
    </div>
  </section>
</section>
{{ end }}
